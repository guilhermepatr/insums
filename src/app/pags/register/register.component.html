<div class="container d-flex justify-content-center align-items-center main">
    <div class="row w-100 shadow-lg p-5 rounded cadastro-container">
      <h2 class="text-center mb-4">Cadastro</h2>
      <form [formGroup]="registroForm" (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label for="nome" class="form-label">Nome</label>
          <input type="text" id="nome" formControlName="nome" class="form-control" placeholder="Digite seu nome">
          <small class="text-danger" *ngIf="registroForm.get('nome')?.errors && registroForm.get('nome')?.touched">
            {{ getErrorMessage('nome') }}
          </small>
        </div>
  
        <div class="mb-3">
          <label for="sobrenome" class="form-label">Sobrenome</label>
          <input type="text" id="sobrenome" formControlName="sobrenome" class="form-control" placeholder="Digite seu sobrenome">
          <small class="text-danger" *ngIf="registroForm.get('sobrenome')?.errors && registroForm.get('sobrenome')?.touched">
            {{ getErrorMessage('sobrenome') }}
          </small>
        </div>
  
        <div class="mb-3">
          <label for="dateNascimento" class="form-label">Data de Nascimento</label>
          <input type="date" id="dateNascimento" formControlName="dateNascimento" class="form-control">
          <small class="text-danger" *ngIf="registroForm.get('dateNascimento')?.errors && registroForm.get('dateNascimento')?.touched">
            {{ getErrorMessage('dateNascimento') }}
          </small>
        </div>
        <!--Inserção de pipe telefone-->
        <div class="mb-3">
          <label for="telefone" class="form-label">Telefone</label>
          <input type="text" id="telefone" formControlName="telefone" class="form-control"
  placeholder="Digite seu telefone"
  [value]="registroForm.get('telefone')?.value | phone"
  (input)="onTelefoneInput($event)">

          
          <small class="text-danger" *ngIf="registroForm.get('telefone')?.errors && registroForm.get('telefone')?.touched">
            {{ getErrorMessage('telefone') }}
          </small>
        </div>  
        
        <div class="mb-3">
          <label for="cep" class="form-label">CEP</label>
          <input type="text" id="cep" formControlName="cep" class="form-control" placeholder="Digite seu CEP" (blur)="buscarEndereco()">
          <small class="text-danger" *ngIf="registroForm.get('cep')?.errors && registroForm.get('cep')?.touched">
            {{ getErrorMessage('cep') }}
          </small>
        </div>
        
        <div class="mb-3">
          <label for="logradouro" class="form-label">Rua</label>
          <input type="text" id="logradouro" formControlName="logradouro" class="form-control" placeholder="Rua" [readonly]="true">
        </div>
        <!--API Publica-->
        
        <div class="mb-3">
          <label for="cep" class="form-label">CEP</label>
          <input type="text" id="cep" formControlName="cep" class="form-control" placeholder="Digite seu CEP" (blur)="buscarEndereco()">
          <small class="text-danger" *ngIf="registroForm.get('cep')?.errors && registroForm.get('cep')?.touched">
            {{ getErrorMessage('cep') }}
          </small>
        </div>
        
        <div class="mb-3">
          <label for="logradouro" class="form-label">Rua</label>
          <input type="text" id="logradouro" formControlName="logradouro" class="form-control" placeholder="Rua" [readonly]="true">
        </div>
        
        <div class="mb-3">
          <label for="bairro" class="form-label">Bairro</label>
          <input type="text" id="bairro" formControlName="bairro" class="form-control" placeholder="Bairro" [readonly]="true">
        </div>
        
        <div class="mb-3">
          <label for="cidade" class="form-label">Cidade</label>
          <input type="text" id="cidade" formControlName="cidade" class="form-control" placeholder="Cidade" [readonly]="true">
        </div>
        
        <div class="mb-3">
          <label for="estado" class="form-label">Estado</label>
          <input type="text" id="estado" formControlName="estado" class="form-control" placeholder="Estado" [readonly]="true">
        </div>
        
        <div class="mb-3">
          <label for="numero" class="form-label">Número da Casa</label>
          <input type="text" id="numero" formControlName="numero" class="form-control" placeholder="Número">
        </div>        
        
  
        <div class="mb-3">
          <label for="email" class="form-label">E-mail</label>
          <input type="email" id="email" formControlName="email" class="form-control" placeholder="Digite seu e-mail">
          <small class="text-danger" *ngIf="registroForm.get('email')?.errors && registroForm.get('email')?.touched">
            {{ getErrorMessage('email') }}
          </small>
        </div>
  
        <div class="mb-3 position-relative">
          <label for="senha" class="form-label">Senha</label>
          <input [type]="mostrarSenha ? 'text' : 'password'" id="senha" formControlName="senha" class="form-control" placeholder="Digite sua senha">
          <button type="button" class="btn btn-outline-secondary position-absolute top-50 end-0 translate-middle-y"
                  (click)="toggleSenha()" style="border: none; background: none;">
            <span *ngIf="mostrarSenha"><i class="bi bi-eye-fill"></i></span>
            <span *ngIf="!mostrarSenha"><i class="bi bi-eye-slash-fill"></i></span>
          </button>
          <small class="text-danger" *ngIf="registroForm.get('senha')?.errors && registroForm.get('senha')?.touched">
            {{ getErrorMessage('senha') }}
          </small>
        </div>
        
        <div class="mb-3 position-relative">
          <label for="confirmSenha" class="form-label">Confirme sua Senha</label>
          <input [type]="mostrarConfirmSenha ? 'text' : 'password'" id="confirmSenha" formControlName="confirmSenha" class="form-control" placeholder="Confirme sua senha">
          <button type="button" class="btn btn-outline-secondary position-absolute top-50 end-0 translate-middle-y"
                  (click)="toggleConfirmSenha()" style="border: none; background: none;">
            <span *ngIf="mostrarConfirmSenha"><i class="bi bi-eye-fill"></i></span>
            <span *ngIf="!mostrarConfirmSenha"><i class="bi bi-eye-slash-fill"></i></span>
          </button>
          <small class="text-danger" *ngIf="registroForm.get('confirmSenha')?.errors && registroForm.get('confirmSenha')?.touched">
            {{ getErrorMessage('confirmSenha') }}
          </small>
        </div>
  
        <button type="submit" class="btn btn-success w-100 mt-3" [disabled]="!registroForm.valid">
          Cadastrar
        </button>
      </form>
    </div>
  </div>